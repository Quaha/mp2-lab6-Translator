# Translator

## Как установить?
Для установки достаточно просто клонировать репозиторий, но при необходиомсти изменить грамматику требуется:
1) Установить Java: https://www.java.com/ru/download/
2) Установить Anaconda с добавлением в PATH: https://www.anaconda.com/download/

## Как запустить?
1) Запустить BUILD_RELEASE.bat
2) В папке build открыть .sln файл
3) Выбрать режим запуска release interface как запускаемый проект

## Структура проекта
1) core:
   - include и src - исходный код проекта
   - antlr - исходный код собранной библиотеки
2) build - собранное решение
3) external - сторонние библиотеки:
    - исходный код antlr4 для сборки динамической библиотеки
    - google tests
4) grammar - содержит описание грамматики, скрипт для получения файлов C++ (и сами файлы), визуализатор дерева
5) interface - .cpp файл с точкой входа
6) tests - исходные коды тестов 

### core
- CalcEvalVisitor - переопределение методов обхода дерева
- common - некоторые enum'ы и другие вспомогательные объявления
- Data - реализация класса Data - обёртка над std::any, которая содержит дополнительную информацию
- DataMath - реализация математических функций для значений, которые лежат в Data
- Interpreter - реализации функции, возврающей std::vector<Data> с результатом выполнения каждой строки
- ThrowingErrorListener - перегрузка класса, выбрасывающего исключения, чтобы выбрасывались исключения

## Описание языка и модель исполнения

Интерпретатор выполняет программу, которая состоит из строк, разделённых `;` (а также `;` в конце). Результатом исполнения каждой строки является какое-то значение (при его отсутствии - None),
которое возвращается вместе со всеми остальными в std::vector<Data>, после загрузки программы в интерпретатор. Консольный интерфейс выводит полученные значения.

### Математические операции

Интерпретатор поддерживает базовые математические операции. Он может работать с целыми числами (внутри они представлены как long long) и вещественными числами
(внутри они представлены как long double). При возможности вычисления всего выражения в целочисленном типе - это происходит, иначе происходит преобразование к вещественному типу.
Интерпретатор поддерживает операторы `+`, `-`, `*`, `/`, причём операторы `+` и `-` есть как в бинарном, так и в унарном варианте, а оператор `/` различается в зависимости от типа аргументов
(если оба операнда - целые числа, то происходит деление с округлением вниз, иначе вещественное деление).

```cpp
-3*(6+4);2.2/2;

>> -30
>> 1.1
```
